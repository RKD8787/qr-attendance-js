<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Attendance System</title>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1e5aa8, #2d6bb5);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 300;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .nav-buttons {
            text-align: center;
            margin-bottom: 30px;
        }

        .nav-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 30px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,123,255,0.2);
        }

        .nav-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,123,255,0.3);
        }

        .nav-btn.active {
            background: #28a745;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Admin Page Styles */
        .admin-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .present-count-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border-left: 5px solid #28a745;
        }

        .present-count {
            font-size: 2.5rem;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
        }

        .present-students h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.3rem;
        }

        .student-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 3px solid #007bff;
            transition: all 0.3s ease;
        }

        .student-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s ease;
        }

        .remove-btn:hover {
            background: #c82333;
        }

        .add-manually-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 15px;
            transition: all 0.3s ease;
            width: 100%;
        }

        .add-manually-btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }

        .qr-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .qr-section h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.2rem;
            line-height: 1.4;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #666;
        }

        .qr-instruction {
            color: #666;
            margin-top: 15px;
            font-size: 14px;
        }

        /* Student Page Styles */
        .student-selection {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            max-width: 600px;
            margin: 0 auto;
        }

        .student-selection h2 {
            text-align: center;
            margin-bottom: 25px;
            color: #333;
            font-size: 1.5rem;
        }

        .student-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .student-checkbox {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .student-checkbox:hover {
            background: #e9ecef;
            border-color: #007bff;
        }

        .student-checkbox.selected {
            background: #e7f3ff;
            border-color: #007bff;
        }

        .student-checkbox input {
            margin-right: 12px;
            transform: scale(1.2);
            cursor: pointer;
        }

        .student-checkbox label {
            font-size: 16px;
            cursor: pointer;
            flex-grow: 1;
        }

        .submit-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 25px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Success Page Styles */
        .success-message {
            background: white;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            max-width: 500px;
            margin: 50px auto;
        }

        .success-message h2 {
            color: #28a745;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .success-message p {
            color: #666;
            font-size: 16px;
            line-height: 1.5;
        }

        .checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #28a745;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 40px;
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            margin: 15% auto;
            padding: 25px;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }

        .modal-buttons {
            margin-top: 20px;
        }

        .modal-btn {
            padding: 10px 20px;
            margin: 0 5px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        .modal-btn.primary {
            background: #007bff;
            color: white;
        }

        .modal-btn.secondary {
            background: #6c757d;
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .admin-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .nav-btn {
                display: block;
                margin: 5px auto;
                width: 200px;
            }
            
            .container {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Dayananda Sagar College Of Engineering</h1>
        <p>Attendance Portal</p>
    </div>

    <div class="container">
        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showPage('admin')">Faculty View</button>
            <button class="nav-btn" onclick="showPage('student')">Student View</button>
        </div>

        <!-- Admin/Faculty Page -->
        <div id="admin-page" class="page active">
            <div class="admin-content">
                <div class="present-count-card">
                    <div class="present-count">Present Count: <span id="present-count">0</span></div>
                    <div class="present-students">
                        <h3>Present Students</h3>
                        <div id="present-students-list">
                            <div class="student-item" style="opacity: 0.5; font-style: italic;">
                                No students marked present yet
                            </div>
                        </div>
                        <button class="add-manually-btn" onclick="showAddManuallyModal()">+ Add Manually</button>
                    </div>
                </div>

                <div class="qr-section">
                    <h3>Connect to College Wi-Fi and Scan the QR Code to Mark Attendance</h3>
                    <div class="qr-code" id="qr-code">
                        <div style="text-align: center;">
                            <div style="font-size: 50px; margin-bottom: 10px;">ðŸ“±</div>
                            <div>QR Code</div>
                        </div>
                    </div>
                    <p class="qr-instruction">Please scan the QR code to mark your attendance.</p>
                    <button class="nav-btn" onclick="generateQR()" style="margin-top: 15px;">Generate New QR</button>
                </div>
            </div>
        </div>

        <!-- Student Page -->
        <div id="student-page" class="page">
            <div class="student-selection">
                <h2>Select Your Name</h2>
                <div class="student-list" id="student-list">
                    <!-- Students will be populated by JavaScript -->
                </div>
                <button class="submit-btn" id="submit-attendance" onclick="submitAttendance()" disabled>Submit</button>
            </div>
        </div>

        <!-- Success Page -->
        <div id="success-page" class="page">
            <div class="success-message">
                <div class="checkmark">âœ“</div>
                <h2>Attendance Submitted Successfully.</h2>
                <p>You may close the page.</p>
            </div>
        </div>
    </div>

    <!-- Add Manually Modal -->
    <div id="add-manually-modal" class="modal">
        <div class="modal-content">
            <h3>Add Student Manually</h3>
            <input type="text" id="manual-student-name" placeholder="Enter student name">
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="addStudentManually()">Add</button>
                <button class="modal-btn secondary" onclick="closeAddManuallyModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Student data
        const allStudents = [
            'Arjun Sharma', 'Priya Patel', 'Rohit Kumar', 'Sneha Gupta', 
            'Vikram Singh', 'Anita Verma', 'Rajesh Yadav', 'Kavya Nair',
            'Aditya Joshi', 'Riya Malhotra', 'Sanjay Thakur', 'Pooja Reddy',
            'Harsh Agarwal', 'Megha Kapoor', 'Nikhil Bansal', 'Shreya Sinha'
        ];

        let presentStudents = [];
        let selectedStudents = [];

        // Initialize the application
        function initApp() {
            populateStudentList();
            updatePresentCount();
            generateQR();
        }

        // Show different pages
        function showPage(page) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => {
                p.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(page + '-page').classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Populate student list for selection
        function populateStudentList() {
            const studentList = document.getElementById('student-list');
            studentList.innerHTML = '';
            
            allStudents.forEach((student, index) => {
                const studentDiv = document.createElement('div');
                studentDiv.className = 'student-checkbox';
                studentDiv.onclick = () => toggleStudent(index);
                
                studentDiv.innerHTML = `
                    <input type="checkbox" id="student-${index}" onchange="toggleStudent(${index})">
                    <label for="student-${index}">${student}</label>
                `;
                
                studentList.appendChild(studentDiv);
            });
        }

        // Toggle student selection
        function toggleStudent(index) {
            const checkbox = document.getElementById(`student-${index}`);
            const studentDiv = checkbox.parentElement;
            
            if (checkbox.checked) {
                if (!selectedStudents.includes(allStudents[index])) {
                    selectedStudents.push(allStudents[index]);
                }
                studentDiv.classList.add('selected');
            } else {
                selectedStudents = selectedStudents.filter(s => s !== allStudents[index]);
                studentDiv.classList.remove('selected');
            }
            
            // Enable/disable submit button
            document.getElementById('submit-attendance').disabled = selectedStudents.length === 0;
        }

        // Submit attendance
        function submitAttendance() {
            if (selectedStudents.length === 0) return;
            
            // Add selected students to present list (avoid duplicates)
            selectedStudents.forEach(student => {
                if (!presentStudents.includes(student)) {
                    presentStudents.push(student);
                }
            });
            
            updatePresentStudentsList();
            updatePresentCount();
            
            // Show success page
            showSuccessPage();
        }

        // Show success page
        function showSuccessPage() {
            document.querySelectorAll('.page').forEach(p => {
                p.classList.remove('active');
            });
            document.getElementById('success-page').classList.add('active');
            
            // Reset student selection after 3 seconds
            setTimeout(() => {
                resetStudentSelection();
            }, 3000);
        }

        // Reset student selection
        function resetStudentSelection() {
            selectedStudents = [];
            document.querySelectorAll('.student-checkbox input').forEach(checkbox => {
                checkbox.checked = false;
            });
            document.querySelectorAll('.student-checkbox').forEach(div => {
                div.classList.remove('selected');
            });
            document.getElementById('submit-attendance').disabled = true;
        }

        // Update present students list in admin view
        function updatePresentStudentsList() {
            const listContainer = document.getElementById('present-students-list');
            
            if (presentStudents.length === 0) {
                listContainer.innerHTML = `
                    <div class="student-item" style="opacity: 0.5; font-style: italic;">
                        No students marked present yet
                    </div>
                `;
                return;
            }
            
            listContainer.innerHTML = '';
            presentStudents.forEach((student, index) => {
                const studentDiv = document.createElement('div');
                studentDiv.className = 'student-item';
                studentDiv.innerHTML = `
                    <span>${student}</span>
                    <button class="remove-btn" onclick="removeStudent(${index})">Remove</button>
                `;
                listContainer.appendChild(studentDiv);
            });
        }

        // Remove student from present list
        function removeStudent(index) {
            presentStudents.splice(index, 1);
            updatePresentStudentsList();
            updatePresentCount();
        }

        // Update present count
        function updatePresentCount() {
            document.getElementById('present-count').textContent = presentStudents.length;
        }

        // Generate QR code (simulation)
        function generateQR() {
            const qrCode = document.getElementById('qr-code');
            const qrPatterns = [
                'â–ˆâ–ˆ â–„â–ˆ â–ˆâ–ˆ<br>â–„  â–ˆâ–„  â–„<br>â–ˆâ–ˆâ–„â–„â–„â–ˆâ–ˆ<br> â–„â–ˆ â–ˆâ–„ <br>â–„â–ˆâ–ˆâ–„â–ˆâ–ˆâ–„',
                'â–„â–ˆâ–„â–„â–ˆâ–„â–ˆ<br> â–ˆâ–„ â–„â–ˆ <br>â–ˆâ–ˆâ–„â–ˆâ–„â–ˆâ–ˆ<br>â–„ â–ˆâ–„â–ˆ â–„<br>â–ˆâ–„â–„ â–„â–„â–ˆ',
                'â–ˆâ–„â–ˆ â–ˆâ–„â–ˆ<br> â–„â–ˆâ–ˆâ–ˆâ–„ <br>â–„â–ˆâ–„â–„â–„â–ˆâ–„<br>â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ<br>â–„â–ˆâ–„â–ˆâ–„â–ˆâ–„'
            ];
            
            const randomPattern = qrPatterns[Math.floor(Math.random() * qrPatterns.length)];
            qrCode.innerHTML = `<div style="font-family: monospace; line-height: 1; font-size: 10px;">${randomPattern}</div>`;
        }

        // Show add manually modal
        function showAddManuallyModal() {
            document.getElementById('add-manually-modal').style.display = 'block';
            document.getElementById('manual-student-name').focus();
        }

        // Close add manually modal
        function closeAddManuallyModal() {
            document.getElementById('add-manually-modal').style.display = 'none';
            document.getElementById('manual-student-name').value = '';
        }

        // Add student manually
        function addStudentManually() {
            const studentName = document.getElementById('manual-student-name').value.trim();
            
            if (studentName && !presentStudents.includes(studentName)) {
                presentStudents.push(studentName);
                updatePresentStudentsList();
                updatePresentCount();
                closeAddManuallyModal();
            } else if (presentStudents.includes(studentName)) {
                alert('Student is already marked present!');
            } else {
                alert('Please enter a valid student name!');
            }
        }

        // Handle Enter key in modal
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('manual-student-name').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addStudentManually();
                }
            });
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('add-manually-modal');
            if (event.target === modal) {
                closeAddManuallyModal();
            }
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', initApp);

        // Simulate QR code scanning (for demo purposes)
        setInterval(() => {
            if (Math.random() < 0.1) { // 10% chance every interval
                const randomStudent = allStudents[Math.floor(Math.random() * allStudents.length)];
                if (!presentStudents.includes(randomStudent)) {
                    presentStudents.push(randomStudent);
                    updatePresentStudentsList();
                    updatePresentCount();
                }
            }
        }, 10000); // Check every 10 seconds
    </script>
</body>
</html>
